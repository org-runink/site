{{ $json := .Inner | transform.Unmarshal }}
<section class="py-4">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-center">
      <div class="inline-flex rounded-full bg-[#161515] p-1.5 border border-stone-800 shadow-inner" role="tablist"
        aria-label="Pricing toggle">
        {{ range $i, $opt := $json.options }}
        <button type="button"
          class="toggle-btn relative px-6 py-2.5 text-xs font-black uppercase tracking-[0.15em] text-stone-500 rounded-full transition-all duration-300 focus:outline-none"
          data-value="{{ $opt.value }}" role="tab" aria-selected="false">
          {{ $opt.label }}
        </button>
        {{ end }}
      </div>
    </div>
  </div>
</section>

<script>
  (function () {
    var container = document.currentScript && document.currentScript.previousElementSibling;
    if (!container) return;
    var firstButtonGroup = container.querySelector('[role="tablist"]');
    if (!firstButtonGroup) return;
    var buttons = firstButtonGroup.querySelectorAll('button[data-value]');
    if (!buttons.length) return;

    function setActive(val) {
      document.documentElement.setAttribute('data-pricing', val);
      buttons.forEach(function (btn) {
        var isActive = btn.getAttribute('data-value') === val;
        btn.setAttribute('aria-selected', isActive ? 'true' : 'false');

        // Active Styles
        btn.classList.toggle('bg-[#9B6F45]', isActive);
        btn.classList.toggle('text-[#f3e9d7]', isActive);
        btn.classList.toggle('shadow-md', isActive);

        // Inactive Styles
        btn.classList.toggle('text-stone-500', !isActive);
        btn.classList.toggle('hover:text-stone-300', !isActive);
      });

      // Emit custom event
      try {
        var evt = new CustomEvent('pricing:toggle', { detail: { value: val } });
        document.dispatchEvent(evt);
      } catch (e) { /* no-op */ }
    }

    buttons.forEach(function (btn) {
      btn.addEventListener('click', function () { setActive(btn.getAttribute('data-value')); });
    });

    // Default to the first option
    if (buttons.length > 0) {
      setActive(buttons[0].getAttribute('data-value'));
    }
  })();
</script>